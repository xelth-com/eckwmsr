import{g as h}from"./CN5Z31N9.js";import{a as i}from"./CgTr7O7k.js";import{b as c}from"./BODtoanW.js";const f=c||"/E";async function n(t,o={}){const r=h(i),s={"Content-Type":"application/json",...o.headers};r.token&&(s.Authorization=`Bearer ${r.token}`);const d={...o,headers:s},e=await fetch(`${f}${t}`,d);if(e.status===401){if(i.logout(),typeof window<"u"){let a="/E";window.location.pathname.includes("/dashboard")&&(a=window.location.pathname.split("/dashboard")[0]||"/E"),window.location.href=`${a}/login`}throw new Error("Unauthorized")}if(!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`Request failed: ${e.status}`)}return e.json()}const m={get:t=>n(t,{method:"GET"}),post:(t,o)=>n(t,{method:"POST",body:JSON.stringify(o)}),put:(t,o)=>n(t,{method:"PUT",body:JSON.stringify(o)}),delete:t=>n(t,{method:"DELETE"})};export{m as a};
