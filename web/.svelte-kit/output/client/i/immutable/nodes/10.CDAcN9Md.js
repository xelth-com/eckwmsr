import{a as d,f as m}from"../chunks/BygaA0WS.js";import{i as Sa}from"../chunks/BqIW1Qmb.js";import{z as ka,G as xa,A as sa,B as Ca,D as r,H as v,b as t,c as la,C as e,F as s,m as oa,O as Da}from"../chunks/CN5Z31N9.js";import{e as _,s as ia}from"../chunks/DAV6nA3v.js";import{i as O}from"../chunks/CU63fefz.js";import{r as g}from"../chunks/BZk0zrkd.js";import{b as u}from"../chunks/De01lyDX.js";import{b as va}from"../chunks/DwKrkxP9.js";import{p as Ma}from"../chunks/Bfc47y5P.js";import{a as $a,s as Ea}from"../chunks/DqSeMMib.js";import{p as Pa}from"../chunks/CJ_YWpRR.js";import{a as f}from"../chunks/Nceboc1J.js";import{g as b}from"../chunks/D6cZGLQe.js";import{t as n}from"../chunks/DycCOpGa.js";var Ua=m('<button class="delete-btn svelte-3lraag">Delete</button>'),qa=m('<div class="loading">Loading...</div>'),Ba=m('<div class="section svelte-3lraag"><h2 class="svelte-3lraag">Status</h2> <div class="field svelte-3lraag"><label class="svelte-3lraag">Current Status</label> <select class="svelte-3lraag"><option>Pending</option><option>Received</option><option>Processing</option><option>Completed</option><option>Cancelled</option></select></div> <div class="field svelte-3lraag"><label class="svelte-3lraag">Priority</label> <select class="svelte-3lraag"><option>Low</option><option>Normal</option><option>High</option><option>Urgent</option></select></div></div>'),Ga=m('<form class="form-grid svelte-3lraag"><div class="section svelte-3lraag"><h2 class="svelte-3lraag">Customer Information</h2> <div class="field svelte-3lraag"><label class="svelte-3lraag">Customer Name *</label> <input type="text" required="" class="svelte-3lraag"/></div> <div class="field svelte-3lraag"><label class="svelte-3lraag">Email</label> <input type="email" class="svelte-3lraag"/></div></div> <div class="section svelte-3lraag"><h2 class="svelte-3lraag">Product Details</h2> <div class="field svelte-3lraag"><label class="svelte-3lraag">Product SKU *</label> <input type="text" required="" class="code-input svelte-3lraag"/></div> <div class="field svelte-3lraag"><label class="svelte-3lraag">Product Name</label> <input type="text" class="svelte-3lraag"/></div></div> <div class="section full svelte-3lraag"><h2 class="svelte-3lraag">Issue Description</h2> <textarea rows="4" class="svelte-3lraag"></textarea></div> <!> <div class="actions full svelte-3lraag"><button type="button" class="cancel-btn svelte-3lraag">Cancel</button> <button type="submit" class="save-btn svelte-3lraag"> </button></div></form>'),Ia=m('<div class="detail-page svelte-3lraag"><div class="header svelte-3lraag"><button class="back-btn svelte-3lraag">‚Üê Back</button> <div class="title-row svelte-3lraag"><h1 class="svelte-3lraag"> </h1> <!></div></div> <!></div>');function Za(ca,na){ka(na,!1);const da=()=>$a(Pa,"$page",ua),[ua,ma]=Ea();let p=da().params.id,c=p==="new",H=oa(!c),a=oa({rmaNumber:"",customerName:"",customerEmail:"",productSku:"",productName:"",issueDescription:"",status:"pending",priority:"normal"});xa(async()=>{c?v(a,t(a).rmaNumber="AUTO-GEN"):await pa()});async function pa(){try{const l=await f.get(`/rma/${p}`);la(a,{...l})}catch{n.add("Error loading RMA","error"),b("/dashboard/rma")}finally{la(H,!1)}}async function _a(){try{if(c){if(!t(a).customerName||!t(a).productSku){n.add("Customer Name and Product SKU are required","warning");return}t(a).rmaNumber==="AUTO-GEN"&&delete t(a).rmaNumber,await f.post("/rma",t(a)),n.add("RMA Created Successfully","success")}else await f.put(`/rma/${p}`,t(a)),n.add("RMA Updated","success");b("/dashboard/rma")}catch(l){n.add(`Error: ${l.message}`,"error")}}async function ga(){if(confirm("Are you sure you want to delete this RMA?"))try{await f.delete(`/rma/${p}`),n.add("RMA Deleted","success"),b("/dashboard/rma")}catch(l){n.add(l.message,"error")}}function K(){b("/dashboard/rma")}Sa();var h=Ia(),y=r(h),L=r(y),T=e(L,2),N=r(T),fa=r(N,!0);s(N);var ba=e(N,2);{var ha=l=>{var i=Ua();_("click",i,ga),d(l,i)};O(ba,l=>{c||l(ha)})}s(T),s(y);var ya=e(y,2);{var Na=l=>{var i=qa();d(l,i)},wa=l=>{var i=Ga(),w=r(i),A=e(r(w),2),z=e(r(A),2);g(z),s(A);var F=e(A,2),j=e(r(F),2);g(j),s(F),s(w);var R=e(w,2),S=e(r(R),2),J=e(r(S),2);g(J),s(S);var Q=e(S,2),V=e(r(Q),2);g(V),s(Q),s(R);var k=e(R,2),W=e(r(k),2);Da(W),s(k);var X=e(k,2);{var Aa=o=>{var x=Ba(),C=e(r(x),2),D=e(r(C),2),M=r(D);M.value=M.__value="pending";var $=e(M);$.value=$.__value="received";var E=e($);E.value=E.__value="processing";var P=e(E);P.value=P.__value="completed";var ea=e(P);ea.value=ea.__value="cancelled",s(D),s(C);var ta=e(C,2),U=e(r(ta),2),q=r(U);q.value=q.__value="low";var B=e(q);B.value=B.__value="normal";var G=e(B);G.value=G.__value="high";var ra=e(G);ra.value=ra.__value="urgent",s(U),s(ta),s(x),va(D,()=>t(a).status,I=>v(a,t(a).status=I)),va(U,()=>t(a).priority,I=>v(a,t(a).priority=I)),d(o,x)};O(X,o=>{c||o(Aa)})}var Y=e(X,2),Z=r(Y),aa=e(Z,2),Ra=r(aa,!0);s(aa),s(Y),s(i),sa(()=>ia(Ra,c?"Create Request":"Save Changes")),u(z,()=>t(a).customerName,o=>v(a,t(a).customerName=o)),u(j,()=>t(a).customerEmail,o=>v(a,t(a).customerEmail=o)),u(J,()=>t(a).productSku,o=>v(a,t(a).productSku=o)),u(V,()=>t(a).productName,o=>v(a,t(a).productName=o)),u(W,()=>t(a).issueDescription,o=>v(a,t(a).issueDescription=o)),_("click",Z,K),_("submit",i,Ma(_a)),d(l,i)};O(ya,l=>{t(H)?l(Na):l(wa,!1)})}s(h),sa(()=>ia(fa,c?"New RMA Request":`RMA ${t(a).rmaNumber}`)),_("click",L,K),d(ca,h),Ca(),ma()}export{Za as component};
