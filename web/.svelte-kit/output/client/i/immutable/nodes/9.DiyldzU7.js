import{a as c,f as d}from"../chunks/CVSPybqJ.js";import{i as Z}from"../chunks/BdqhJSGs.js";import{z as $,G as tt,B as at,D as e,c as A,C as l,F as a,b as s,m as R,A as q}from"../chunks/CqpwgXEk.js";import{e as S,s as v}from"../chunks/D0Wkj3YL.js";import{i as C}from"../chunks/NgGcbYIQ.js";import{e as et,s as st,i as rt}from"../chunks/DKR_uuIj.js";import{a as ot}from"../chunks/dVpO60LJ.js";import{g as L}from"../chunks/B_qakWci.js";import{t as lt}from"../chunks/C3Rs9I5p.js";var ct=d('<div class="loading">Loading requests...</div>'),vt=d('<div class="error"> </div>'),dt=d('<div class="empty-state svelte-rb4uhc">No RMA requests found.</div>'),it=d('<tr class="svelte-rb4uhc"><td class="code svelte-rb4uhc"> </td><td class="svelte-rb4uhc"> </td><td class="code-sm svelte-rb4uhc"> </td><td class="svelte-rb4uhc"> </td><td class="svelte-rb4uhc"><span> </span></td></tr>'),ut=d('<div class="table-container svelte-rb4uhc"><!> <table class="rma-table svelte-rb4uhc"><thead><tr class="svelte-rb4uhc"><th class="svelte-rb4uhc">RMA #</th><th class="svelte-rb4uhc">Customer</th><th class="svelte-rb4uhc">Product SKU</th><th class="svelte-rb4uhc">Date</th><th class="svelte-rb4uhc">Status</th></tr></thead><tbody></tbody></table></div>'),nt=d('<div class="rma-page"><header class="svelte-rb4uhc"><h1 class="svelte-rb4uhc">RMA Requests</h1> <div class="actions"><button class="action-btn primary svelte-rb4uhc">+ New Request</button></div></header> <!></div>');function At(F,z){$(z,!1);let h=R([]),w=R(!0),b=R(null);tt(async()=>{await B()});async function B(){try{A(h,await ot.get("/rma"))}catch(t){console.error(t),A(b,t.message),lt.add("Failed to load RMAs","error")}finally{A(w,!1)}}function G(t){L(`/dashboard/rma/${t}`)}function K(){L("/dashboard/rma/new")}function P(t){return t?new Date(t).toLocaleDateString():"-"}Z();var m=nt(),f=e(m),M=l(e(f),2),U=e(M);a(M),a(f);var j=l(f,2);{var E=t=>{var r=ct();c(t,r)},H=t=>{var r=vt(),u=e(r,!0);a(r),q(()=>v(u,s(b))),c(t,r)},I=t=>{var r=ut(),u=e(r);{var J=i=>{var o=dt();c(i,o)};C(u,i=>{s(h).length===0&&i(J)})}var D=l(u,2),N=l(e(D));et(N,5,()=>s(h),rt,(i,o)=>{var n=it(),p=e(n),O=e(p,!0);a(p);var _=l(p),Q=e(_,!0);a(_);var g=l(_),T=e(g,!0);a(g);var x=l(g),V=e(x,!0);a(x);var k=l(x),y=e(k),W=e(y,!0);a(y),a(k),a(n),q((X,Y)=>{v(O,s(o).rmaNumber),v(Q,s(o).customerName),v(T,s(o).productSku),v(V,X),st(y,1,`status-badge ${Y??""}`,"svelte-rb4uhc"),v(W,s(o).status)},[()=>P(s(o).createdAt),()=>s(o).status.toLowerCase()]),S("click",n,()=>G(s(o).id)),c(i,n)}),a(N),a(D),a(r),c(t,r)};C(j,t=>{s(w)?t(E):s(b)?t(H,1):t(I,!1)})}a(m),S("click",U,K),c(F,m),at()}export{At as component};
