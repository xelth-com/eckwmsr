import{a as J}from"../chunks/Nceboc1J.js";import{a as o,f as n}from"../chunks/BygaA0WS.js";import{i as Da}from"../chunks/BqIW1Qmb.js";import{z as Pa,G as Ca,A as h,B as Aa,C as t,D as a,c as x,b as s,F as e,m as U,J as ne,P as He,ad as Ne}from"../chunks/CN5Z31N9.js";import{e as E,s as v}from"../chunks/DAV6nA3v.js";import{i as k}from"../chunks/CU63fefz.js";import{s as Z,e as ce,i as we}from"../chunks/DFBiLcyC.js";import{s as Re}from"../chunks/DZHojTuh.js";import{s as Ee}from"../chunks/Bfc47y5P.js";import{b as Fe}from"../chunks/gYmV0BzS.js";import{t as ds}from"../chunks/DycCOpGa.js";async function La(){try{const[hs,xs,vs,is]=await Promise.all([J.get("/api/odoo/pickings?state=assigned"),J.get("/api/delivery/shipments"),J.get("/api/delivery/sync/history"),J.get("/api/delivery/config")]);return{pickings:hs||[],shipments:xs||[],syncHistory:vs||[],providersConfig:is||{opal:!1,dhl:!1}}}catch(hs){return console.error("Load error:",hs),{pickings:[],shipments:[],syncHistory:[],providersConfig:{opal:!1,dhl:!1},error:hs.message}}}const Mt=Object.freeze(Object.defineProperty({__proto__:null,load:La},Symbol.toStringTag,{value:"Module"}));var Ia=n('<button class="action-btn opal-btn svelte-1dkwspw"> </button>'),Oa=n('<button class="action-btn dhl-btn svelte-1dkwspw"> </button>'),Ta=n('<div class="loading svelte-1dkwspw">Loading shipping data...</div>'),Ha=n('<div class="error svelte-1dkwspw"> </div>'),Na=n('<div class="empty-state svelte-1dkwspw"><p class="svelte-1dkwspw">âœ… No pickings ready to ship</p> <small class="svelte-1dkwspw">Pickings with status "assigned" will appear here</small></div>'),Ra=n('<tr class="svelte-1dkwspw"><td class="picking-name svelte-1dkwspw"> </td><td class="svelte-1dkwspw"> </td><td class="svelte-1dkwspw"> </td><td class="svelte-1dkwspw"><div class="location-cell svelte-1dkwspw"><span class="from svelte-1dkwspw"> </span> <span class="arrow svelte-1dkwspw">â†’</span> <span class="to svelte-1dkwspw"> </span></div></td><td class="svelte-1dkwspw"><span class="state-badge svelte-1dkwspw"> </span></td><td class="svelte-1dkwspw"> </td><td class="svelte-1dkwspw"><button class="action-btn ship-btn svelte-1dkwspw"> </button></td></tr>'),Ea=n('<div class="table-container svelte-1dkwspw"><table class="svelte-1dkwspw"><thead class="svelte-1dkwspw"><tr><th class="svelte-1dkwspw">Picking #</th><th class="svelte-1dkwspw">Origin</th><th class="svelte-1dkwspw">Partner</th><th class="svelte-1dkwspw">Location</th><th class="svelte-1dkwspw">State</th><th class="svelte-1dkwspw">Scheduled</th><th class="svelte-1dkwspw">Actions</th></tr></thead><tbody class="svelte-1dkwspw"></tbody></table></div>'),Fa=n(`<div class="pickings-section"><p class="section-desc svelte-1dkwspw">These are Odoo Transfer Orders ready to be shipped. Click "Ship
                with OPAL" to create a delivery shipment.</p> <!></div>`),$a=n('<div class="empty-state svelte-1dkwspw"><p class="svelte-1dkwspw">ğŸ“­ No shipments yet</p> <small class="svelte-1dkwspw">Create your first shipment from the "Ready to Ship" tab</small></div>'),za=n('<span class="hwb-number svelte-1dkwspw"> </span>'),Ua=n('<span class="tracking-number svelte-1dkwspw"> </span> <!>',1),Ja=n('<span class="muted svelte-1dkwspw">Pending...</span>'),Ma=n('<div class="route svelte-1dkwspw"><span class="from svelte-1dkwspw"> </span> <span class="arrow svelte-1dkwspw">â†’</span> <span class="to svelte-1dkwspw"> </span></div>'),ja=n('<span class="muted svelte-1dkwspw">-</span>'),Ba=n('<span class="product-badge svelte-1dkwspw"> </span>'),Ga=n('<span class="muted svelte-1dkwspw">-</span>'),Wa=n('<span class="receiver svelte-1dkwspw"> </span>'),qa=n('<div class="delivery-info svelte-1dkwspw"><span> </span> <!></div>'),Va=n('<span class="muted svelte-1dkwspw">-</span>'),Za=n('<button class="action-btn cancel-btn svelte-1dkwspw">âŒ Cancel</button>'),Ka=n('<span class="muted svelte-1dkwspw">-</span>'),Qa=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Contact:</label> <span class="svelte-1dkwspw"> </span></div>'),Xa=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Phone:</label> <span class="svelte-1dkwspw"> </span></div>'),Ya=n('<div class="detail-item note svelte-1dkwspw"><label class="svelte-1dkwspw">Note:</label> <span class="svelte-1dkwspw"> </span></div>'),st=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Contact:</label> <span class="svelte-1dkwspw"> </span></div>'),et=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Phone:</label> <span class="svelte-1dkwspw"> </span></div>'),at=n('<div class="detail-item note svelte-1dkwspw"><label class="svelte-1dkwspw">Note:</label> <span class="svelte-1dkwspw"> </span></div>'),tt=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Contents:</label> <span class="highlight svelte-1dkwspw"> </span></div>'),rt=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Packages:</label> <span class="svelte-1dkwspw"> </span></div>'),lt=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Weight:</label> <span class="svelte-1dkwspw"> </span></div>'),dt=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Dimensions:</label> <span class="svelte-1dkwspw"> </span></div>'),vt=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Value:</label> <span class="value svelte-1dkwspw"> </span></div>'),it=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Date/Time:</label> <span class="svelte-1dkwspw"> </span></div>'),pt=n(`<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Received
                                                                    by:</label> <span class="highlight svelte-1dkwspw"> </span></div>`),ot=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Created:</label> <span class="svelte-1dkwspw"> </span></div>'),nt=n(`<tr class="details-row svelte-1dkwspw"><td colspan="7" class="svelte-1dkwspw"><div class="shipment-details svelte-1dkwspw"><div class="details-grid svelte-1dkwspw"><div class="detail-section svelte-1dkwspw"><h4 class="svelte-1dkwspw">ğŸ“¦ Pickup (Abholung)</h4> <div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Company:</label> <span class="svelte-1dkwspw"> </span></div> <!> <div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Address:</label> <span class="svelte-1dkwspw"> </span></div> <!> <div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Date/Time:</label> <span class="svelte-1dkwspw"> </span></div> <!></div> <div class="detail-section svelte-1dkwspw"><h4 class="svelte-1dkwspw">ğŸšš Delivery
                                                            (Zustellung)</h4> <div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Company:</label> <span class="svelte-1dkwspw"> </span></div> <!> <div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Address:</label> <span class="svelte-1dkwspw"> </span></div> <!> <div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Date/Time:</label> <span class="svelte-1dkwspw"> </span></div> <!></div> <div class="detail-section svelte-1dkwspw"><h4 class="svelte-1dkwspw">ğŸ“‹ Package Info</h4> <!> <!> <!> <!> <!></div> <div class="detail-section svelte-1dkwspw"><h4 class="svelte-1dkwspw">ğŸ“Š Status</h4> <div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw"> </label> <span class="status-value svelte-1dkwspw"> </span></div> <!> <!> <!></div></div></div></td></tr>`),ct=n('<tr><td class="expand-cell svelte-1dkwspw"><span class="expand-icon svelte-1dkwspw"> </span></td><td class="tracking-cell svelte-1dkwspw"><span> </span> <!></td><td class="route-cell svelte-1dkwspw"><!></td><td class="svelte-1dkwspw"><!></td><td class="svelte-1dkwspw"><span class="state-badge svelte-1dkwspw"> </span></td><td class="svelte-1dkwspw"><!></td><td class="svelte-1dkwspw"><!></td></tr> <!>',1),wt=n('<div class="table-container svelte-1dkwspw"><table class="svelte-1dkwspw"><thead class="svelte-1dkwspw"><tr><th class="svelte-1dkwspw"></th><th class="svelte-1dkwspw">Tracking</th><th class="svelte-1dkwspw">From â†’ To</th><th class="svelte-1dkwspw">Product</th><th class="svelte-1dkwspw">Status</th><th class="svelte-1dkwspw">Delivered</th><th class="svelte-1dkwspw">Actions</th></tr></thead><tbody class="svelte-1dkwspw"></tbody></table></div>'),_t=n('<div class="shipments-section"><p class="section-desc svelte-1dkwspw">Active and past shipments created through the delivery system.</p> <!></div>'),ut=n('<div class="empty-state svelte-1dkwspw"><p class="svelte-1dkwspw">ğŸ“­ No sync history yet</p> <small class="svelte-1dkwspw">Synchronizations will appear automatically</small></div>'),kt=n('<span class="expand-icon svelte-1dkwspw"> </span>'),ht=n('<span class="muted svelte-1dkwspw">-</span>'),bt=n('<button class="action-btn copy-btn svelte-1dkwspw" title="Copy debug info for AI">ğŸ¤– Copy for AI</button>'),ft=n('<span class="muted svelte-1dkwspw">-</span>'),gt=n('<div class="debug-item svelte-1dkwspw"><label class="svelte-1dkwspw">Category:</label> <span> </span></div>'),mt=n(`<div class="debug-item svelte-1dkwspw"><label class="svelte-1dkwspw">Likely
                                                                        Cause:</label> <span class="highlight svelte-1dkwspw"> </span></div>`),yt=n(`<div class="debug-item svelte-1dkwspw"><label class="svelte-1dkwspw">ğŸ’¡ AI
                                                                        Hint:</label> <span class="ai-hint svelte-1dkwspw"> </span></div>`),xt=n('<div class="debug-item svelte-1dkwspw"><label class="svelte-1dkwspw">Step:</label> <span class="svelte-1dkwspw"> </span></div>'),St=n(`<div class="stderr-section svelte-1dkwspw"><h5 class="svelte-1dkwspw">ğŸ“‹
                                                                    Playwright
                                                                    Output
                                                                    (stderr):</h5> <pre class="stderr-output svelte-1dkwspw"> </pre></div>`),Dt=n(`<div class="debug-section svelte-1dkwspw"><h4 class="svelte-1dkwspw">ğŸ” Debug Information</h4> <div class="debug-grid svelte-1dkwspw"><!> <!> <!> <!></div> <!> <details class="raw-json svelte-1dkwspw"><summary class="svelte-1dkwspw">ğŸ”§ Raw Debug
                                                                JSON</summary> <pre class="svelte-1dkwspw"> </pre></details></div>`),Pt=n('<tr class="debug-row svelte-1dkwspw"><td colspan="9" class="svelte-1dkwspw"><div class="debug-details svelte-1dkwspw"><div class="debug-section svelte-1dkwspw"><h4 class="svelte-1dkwspw">âš ï¸ Error</h4> <pre class="error-message svelte-1dkwspw"> </pre></div> <!></div></td></tr>'),Ct=n('<tr><td class="expand-cell svelte-1dkwspw"><!></td><td class="sync-time svelte-1dkwspw"> </td><td class="svelte-1dkwspw"><span> </span></td><td class="svelte-1dkwspw"><span> </span></td><td class="stat-cell svelte-1dkwspw"> </td><td class="stat-cell svelte-1dkwspw"> </td><td class="stat-cell muted svelte-1dkwspw"> </td><td class="duration-cell svelte-1dkwspw"> </td><td class="svelte-1dkwspw"><!></td></tr> <!>',1),At=n('<div class="table-container svelte-1dkwspw"><table class="svelte-1dkwspw"><thead class="svelte-1dkwspw"><tr><th class="svelte-1dkwspw"></th><th class="svelte-1dkwspw">Time</th><th class="svelte-1dkwspw">Provider</th><th class="svelte-1dkwspw">Status</th><th class="svelte-1dkwspw">Created</th><th class="svelte-1dkwspw">Updated</th><th class="svelte-1dkwspw">Skipped</th><th class="svelte-1dkwspw">Duration</th><th class="svelte-1dkwspw">Actions</th></tr></thead><tbody class="svelte-1dkwspw"></tbody></table></div>'),Lt=n(`<div class="sync-section svelte-1dkwspw"><p class="section-desc svelte-1dkwspw">Synchronization history with external services (OPAL, DHL,
                Odoo). OPAL syncs every hour (on the hour), DHL syncs at :30
                past the hour. Active 8 AM - 6 PM.</p> <!></div>`),It=n('<div class="shipping-page svelte-1dkwspw"><header class="svelte-1dkwspw"><h1 class="svelte-1dkwspw">ğŸ“¦ Shipping & Delivery</h1> <div class="header-actions svelte-1dkwspw"><!> <!> <button class="refresh-btn svelte-1dkwspw"> </button></div></header> <div class="tabs svelte-1dkwspw"><button> </button> <button> </button> <button>ğŸ”„ Sync History</button></div> <!></div>');function jt(hs,xs){Pa(xs,!1);let vs=U([]),is=U([]),Js=U([]),ps=U(!0),Ms=U(null),M=U("pickings"),j=U(new Set),Ss=U(!1),Ds=U(!1),K=U(new Set),Q=U(new Set),Ps=U({opal:!1,dhl:!1});Ca(async()=>{await bs()});async function bs(){x(ps,!0),x(Ms,null);try{const[r,_,I,X]=await Promise.all([J.get("/api/odoo/pickings?state=assigned"),J.get("/api/delivery/shipments"),J.get("/api/delivery/sync/history"),J.get("/api/delivery/config")]);x(vs,r||[]),x(is,_||[]),x(Js,I||[]),x(Js,I||[]),X&&x(Ps,X)}catch(r){console.error(r),x(Ms,r.message)}finally{x(ps,!1)}}async function $e(r){if(!s(j).has(r)){s(j).add(r),x(j,s(j));try{await J.post("/api/delivery/shipments",{pickingId:r,providerCode:"opal"}),await bs(),x(M,"shipments")}catch(_){alert("Failed to create shipment: "+_.message)}finally{s(j).delete(r),x(j,s(j))}}}async function ze(r){if(confirm("Are you sure you want to cancel this shipment?"))try{await J.post(`/api/delivery/shipments/${r}/cancel`),await bs()}catch(_){alert("Failed to cancel shipment: "+_.message)}}async function Ue(){x(Ss,!0),ds.add("Syncing with OPAL...","info");try{await J.post("/api/delivery/import/opal",{}),ds.add("OPAL sync started. Refreshing data...","success"),setTimeout(async()=>{await bs(),x(Ss,!1)},4e3)}catch(r){ds.add("OPAL sync failed: "+r.message,"error"),x(Ss,!1)}}async function Je(){x(Ds,!0),ds.add("Syncing with DHL...","info");try{await J.post("/api/delivery/import/dhl",{}),ds.add("DHL sync started. Refreshing data...","success"),setTimeout(async()=>{await bs(),x(Ds,!1)},4e3)}catch(r){ds.add("DHL sync failed: "+r.message,"error"),x(Ds,!1)}}function Me(r){var _;return r?r.provider==="dhl"?"dhl":r.ocu_number||r.hwb_number?"opal":(_=r.product)!=null&&_.includes("DHL")?"dhl":"opal":"unknown"}function Vs(r){return r?new Date(r).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function je(r){return{draft:"#6c757d",assigned:"#ffc107",confirmed:"#17a2b8",done:"#28a745",cancel:"#dc3545"}[r]||"#6c757d"}function Be(r){return{pending:"#ffc107",processing:"#17a2b8",shipped:"#28a745",delivered:"#28a745",failed:"#dc3545",cancelled:"#6c757d"}[r]||"#6c757d"}function Ge(r){s(K).has(r)?s(K).delete(r):s(K).add(r),x(K,s(K))}function We(r){if(!r)return null;try{return JSON.parse(r)}catch{return null}}function qe(r){s(Q).has(r)?s(Q).delete(r):s(Q).add(r),x(Q,s(Q))}async function Ve(r){const _=`
# Sync Error Debug Info
Provider: ${r.provider}
Time: ${Vs(r.startedAt)}
Status: ${r.status}
Duration: ${r.duration?(r.duration/1e3).toFixed(1)+"s":"N/A"}

## Error Message
${r.errorDetail||"No error detail"}

## Debug Information
${r.debugInfo?JSON.stringify(r.debugInfo,null,2):"No debug info available"}

## Statistics
- Created: ${r.created||0}
- Updated: ${r.updated||0}
- Skipped: ${r.skipped||0}
- Errors: ${r.errors||0}

---
Copy this to ChatGPT/Claude for analysis
`.trim();try{await navigator.clipboard.writeText(_),ds.add("Debug info copied to clipboard!","success")}catch(I){ds.add("Failed to copy: "+I.message,"error")}}Da();var Zs=It(),Ks=a(Zs),_e=t(a(Ks),2),ue=a(_e);{var Ze=r=>{var _=Ia(),I=a(_,!0);e(_),h(()=>{_.disabled=s(Ss)||s(ps),v(I,s(Ss)?"â³ Syncing...":"ğŸŸ¢ Sync OPAL")}),E("click",_,Ue),o(r,_)};k(ue,r=>{s(Ps)&&s(Ps).opal===!0&&r(Ze)})}var ke=t(ue,2);{var Ke=r=>{var _=Oa(),I=a(_,!0);e(_),h(()=>{_.disabled=s(Ds)||s(ps),v(I,s(Ds)?"â³ Syncing...":"ğŸŸ¡ Sync DHL")}),E("click",_,Je),o(r,_)};k(ke,r=>{s(Ps)&&s(Ps).dhl===!0&&r(Ke)})}var js=t(ke,2),Qe=a(js,!0);e(js),e(_e),e(Ks);var Qs=t(Ks,2),Cs=a(Qs);let he;var Xe=a(Cs);e(Cs);var As=t(Cs,2);let be;var Ye=a(As);e(As);var fe=t(As,2);let ge;e(Qs);var sa=t(Qs,2);{var ea=r=>{var _=Ta();o(r,_)},aa=r=>{var _=Ha(),I=a(_);e(_),h(()=>v(I,`Failed to load data: ${s(Ms)??""}`)),o(r,_)},ta=r=>{var _=Fa(),I=t(a(_),2);{var X=S=>{var L=Na();o(S,L)},Ls=S=>{var L=Ea(),Y=a(L),ss=t(a(Y));ce(ss,5,()=>s(vs),we,(Is,d)=>{var l=Ra(),O=a(l),os=a(O,!0);e(O);var T=t(O),fs=a(T,!0);e(T);var B=t(T),gs=a(B,!0);e(B);var G=t(B),es=a(G),F=a(es),as=a(F,!0);e(F);var ns=t(F,4),Os=a(ns,!0);e(ns),e(es),e(G);var W=t(G),q=a(W),ts=a(q,!0);e(q),e(W);var cs=t(W),ws=a(cs,!0);e(cs);var ms=t(cs),$=a(ms),Ts=a($,!0);e($),e(ms),e(l),h((_s,Hs,V,us)=>{v(os,s(d).name),v(fs,s(d).origin||"-"),v(gs,s(d).partner_id||"-"),v(as,s(d).location_id||"-"),v(Os,s(d).location_dest_id||"-"),Re(q,`background-color: ${_s??""}`),v(ts,s(d).state),v(ws,Hs),$.disabled=V,v(Ts,us)},[()=>je(s(d).state),()=>Vs(s(d).scheduled_date),()=>s(j).has(s(d).id),()=>s(j).has(s(d).id)?"â³ Processing...":"ğŸšš Ship with OPAL"]),E("click",$,()=>$e(s(d).id)),o(Is,l)}),e(ss),e(Y),e(L),o(S,L)};k(I,S=>{s(vs).length===0?S(X):S(Ls,!1)})}e(_),o(r,_)},ra=r=>{var _=_t(),I=t(a(_),2);{var X=S=>{var L=$a();o(S,L)},Ls=S=>{var L=wt(),Y=a(L),ss=t(a(Y));ce(ss,5,()=>s(is),we,(Is,d)=>{const l=He(()=>We(s(d).rawResponse)),O=He(()=>Me(s(l)));var os=ct(),T=ne(os);let fs;var B=a(T),gs=a(B),G=a(gs,!0);e(gs),e(B);var es=t(B),F=a(es);let as;var ns=a(F,!0);e(F);var Os=t(F,2);{var W=c=>{var w=Ua(),f=ne(w),z=a(f,!0);e(f);var H=t(f,2);{var N=A=>{var D=za(),ks=a(D);e(D),h(()=>v(ks,`HWB: ${s(l).hwb_number??""}`)),o(A,D)};k(H,A=>{var D;(D=s(l))!=null&&D.hwb_number&&A(N)})}h(()=>{var A,D;return v(z,s(d).trackingNumber||((A=s(l))==null?void 0:A.ocu_number)||((D=s(l))==null?void 0:D.tracking_number))}),o(c,w)},q=c=>{var w=Ja();o(c,w)};k(Os,c=>{var w,f;s(d).trackingNumber||(w=s(l))!=null&&w.ocu_number||(f=s(l))!=null&&f.tracking_number?c(W):c(q,!1)})}e(es);var ts=t(es),cs=a(ts);{var ws=c=>{var w=Ma(),f=a(w),z=a(f,!0);e(f);var H=t(f,4),N=a(H,!0);e(H),e(w),h(()=>{v(z,s(l).pickup_name||s(l).pickup_city||"InBody"),v(N,s(l).delivery_name||s(l).recipient_name||s(l).delivery_city||s(l).recipient_city||"-")}),o(c,w)},ms=c=>{var w=ja();o(c,w)};k(cs,c=>{s(l)?c(ws):c(ms,!1)})}e(ts);var $=t(ts),Ts=a($);{var _s=c=>{var w=Ba(),f=a(w,!0);e(w),h(()=>v(f,s(l).product_type||s(l).product)),o(c,w)},Hs=c=>{var w=Ga();o(c,w)};k(Ts,c=>{var w,f;(w=s(l))!=null&&w.product_type||(f=s(l))!=null&&f.product?c(_s):c(Hs,!1)})}e($);var V=t($),us=a(V),Ns=a(us,!0);e(us),e(V);var Rs=t(V),Xs=a(Rs);{var Ys=c=>{var w=qa(),f=a(w),z=a(f);e(f);var H=t(f,2);{var N=A=>{var D=Wa(),ks=a(D);e(D),h(()=>v(ks,`ğŸ“ ${s(l).receiver??""}`)),o(A,D)};k(H,A=>{s(l).receiver&&A(N)})}e(w),h(()=>v(z,`${s(l).status_date??""}
                                                    ${(s(l).status_time||"")??""}`)),o(c,w)},se=c=>{var w=Va();o(c,w)};k(Xs,c=>{var w;(w=s(l))!=null&&w.status_date?c(Ys):c(se,!1)})}e(Rs);var Es=t(Rs),ee=a(Es);{var g=c=>{var w=Za();E("click",w,()=>ze(s(d).picking_id)),o(c,w)},C=c=>{var w=Ka();o(c,w)};k(ee,c=>{s(d).status==="pending"||s(d).status==="processing"?c(g):c(C,!1)})}e(Es),e(T);var rs=t(T,2);{var ls=c=>{var w=nt(),f=a(w),z=a(f),H=a(z),N=a(H),A=t(a(N),2),D=t(a(A),2),ks=a(D,!0);e(D),e(A);var $s=t(A,2);{var ae=i=>{var p=Qa(),u=t(a(p),2),b=a(u,!0);e(u),e(p),h(()=>v(b,s(l).pickup_contact)),o(i,p)};k($s,i=>{s(l).pickup_contact&&i(ae)})}var ys=t($s,2),Bs=t(a(ys),2),te=a(Bs);e(Bs),e(ys);var Gs=t(ys,2);{var Ws=i=>{var p=Xa(),u=t(a(p),2),b=a(u,!0);e(u),e(p),h(()=>v(b,s(l).pickup_phone)),o(i,p)};k(Gs,i=>{s(l).pickup_phone&&s(l).pickup_phone!=="+49 ()"&&i(Ws)})}var zs=t(Gs,2),Us=t(a(zs),2),qs=a(Us);e(Us),e(zs);var re=t(zs,2);{var m=i=>{var p=Ya(),u=t(a(p),2),b=a(u,!0);e(u),e(p),h(()=>v(b,s(l).pickup_note)),o(i,p)};k(re,i=>{s(l).pickup_note&&i(m)})}e(N);var y=t(N,2),P=t(a(y),2),R=t(a(P),2),le=a(R,!0);e(R),e(P);var me=t(P,2);{var da=i=>{var p=st(),u=t(a(p),2),b=a(u,!0);e(u),e(p),h(()=>v(b,s(l).delivery_contact)),o(i,p)};k(me,i=>{s(l).delivery_contact&&i(da)})}var de=t(me,2),ye=t(a(de),2),va=a(ye);e(ye),e(de);var xe=t(de,2);{var ia=i=>{var p=et(),u=t(a(p),2),b=a(u,!0);e(u),e(p),h(()=>v(b,s(l).delivery_phone)),o(i,p)};k(xe,i=>{s(l).delivery_phone&&s(l).delivery_phone!=="+49 ()"&&i(ia)})}var ve=t(xe,2),Se=t(a(ve),2),pa=a(Se);e(Se),e(ve);var oa=t(ve,2);{var na=i=>{var p=at(),u=t(a(p),2),b=a(u,!0);e(u),e(p),h(()=>v(b,s(l).delivery_note)),o(i,p)};k(oa,i=>{s(l).delivery_note&&i(na)})}e(y);var ie=t(y,2),De=t(a(ie),2);{var ca=i=>{var p=tt(),u=t(a(p),2),b=a(u,!0);e(u),e(p),h(()=>v(b,s(l).description)),o(i,p)};k(De,i=>{s(l).description&&i(ca)})}var Pe=t(De,2);{var wa=i=>{var p=rt(),u=t(a(p),2),b=a(u);e(u),e(p),h(()=>v(b,`${s(l).package_count??""}
                                                                    pcs`)),o(i,p)};k(Pe,i=>{s(l).package_count&&i(wa)})}var Ce=t(Pe,2);{var _a=i=>{var p=lt(),u=t(a(p),2),b=a(u);e(u),e(p),h(()=>v(b,`${s(l).weight??""}
                                                                    kg`)),o(i,p)};k(Ce,i=>{s(l).weight&&i(_a)})}var Ae=t(Ce,2);{var ua=i=>{var p=dt(),u=t(a(p),2),b=a(u);e(u),e(p),h(()=>v(b,`${s(l).dimensions??""}
                                                                    cm`)),o(i,p)};k(Ae,i=>{s(l).dimensions&&i(ua)})}var ka=t(Ae,2);{var ha=i=>{var p=vt(),u=t(a(p),2),b=a(u);e(u),e(p),h(Sa=>v(b,`${Sa??""} EUR`),[()=>s(l).value.toLocaleString("de-DE")]),o(i,p)};k(ka,i=>{s(l).value&&i(ha)})}e(ie);var Le=t(ie,2),pe=t(a(Le),2),oe=a(pe),ba=a(oe);e(oe);var Ie=t(oe,2),fa=a(Ie,!0);e(Ie),e(pe);var Oe=t(pe,2);{var ga=i=>{var p=it(),u=t(a(p),2),b=a(u);e(u),e(p),h(()=>v(b,`${s(l).status_date??""}
                                                                    ${(s(l).status_time||"")??""}`)),o(i,p)};k(Oe,i=>{s(l).status_date&&i(ga)})}var Te=t(Oe,2);{var ma=i=>{var p=pt(),u=t(a(p),2),b=a(u,!0);e(u),e(p),h(()=>v(b,s(l).receiver)),o(i,p)};k(Te,i=>{s(l).receiver&&i(ma)})}var ya=t(Te,2);{var xa=i=>{var p=ot(),u=t(a(p),2),b=a(u);e(u),e(p),h(()=>v(b,`${s(l).created_at??""}
                                                                    by ${(s(l).created_by||"-")??""}`)),o(i,p)};k(ya,i=>{s(l).created_at&&i(xa)})}e(Le),e(H),e(z),e(f),e(w),h(i=>{v(ks,s(l).pickup_name||"-"),v(te,`${(s(l).pickup_street||"-")??""}, ${s(l).pickup_zip??""}
                                                                ${s(l).pickup_city??""}`),v(qs,`${(s(l).pickup_date||"-")??""}
                                                                ${(s(l).pickup_time||"")??""}`),v(le,s(l).delivery_name||"-"),v(va,`${(s(l).delivery_street||"-")??""}, ${s(l).delivery_zip??""}
                                                                ${s(l).delivery_city??""}`),v(pa,`${(s(l).delivery_date||"-")??""}
                                                                ${(s(l).delivery_time||"")??""}`),v(ba,`${i??""}
                                                                Status:`),v(fa,s(l).status||"-")},[()=>s(O).toUpperCase()]),o(c,w)},Fs=Ne(()=>s(K).has(s(d).id)&&s(l));k(rs,c=>{s(Fs)&&c(ls)})}h((c,w,f,z)=>{fs=Z(T,1,"shipment-row svelte-1dkwspw",null,fs,c),v(G,w),as=Z(F,1,"provider-badge svelte-1dkwspw",null,as,{opal:s(O)==="opal",dhl:s(O)==="dhl"}),v(ns,f),Re(us,`background-color: ${z??""}`),v(Ns,s(d).status)},[()=>({expanded:s(K).has(s(d).id)}),()=>s(K).has(s(d).id)?"â–¼":"â–¶",()=>s(O).toUpperCase(),()=>Be(s(d).status)]),E("click",Es,Ee(function(c){Fe.call(this,xs,c)})),E("click",T,()=>Ge(s(d).id)),o(Is,os)}),e(ss),e(Y),e(L),o(S,L)};k(I,S=>{s(is).length===0?S(X):S(Ls,!1)})}e(_),o(r,_)},la=r=>{var _=Lt(),I=t(a(_),2);{var X=S=>{var L=ut();o(S,L)},Ls=S=>{var L=At(),Y=a(L),ss=t(a(Y));ce(ss,5,()=>s(Js),we,(Is,d)=>{var l=Ct(),O=ne(l);let os;var T=a(O),fs=a(T);{var B=g=>{var C=kt(),rs=a(C,!0);e(C),h(ls=>v(rs,ls),[()=>s(Q).has(s(d).id)?"â–¼":"â–¶"]),o(g,C)},gs=g=>{var C=ht();o(g,C)};k(fs,g=>{s(d).status==="error"?g(B):g(gs,!1)})}e(T);var G=t(T),es=a(G,!0);e(G);var F=t(G),as=a(F);let ns;var Os=a(as,!0);e(as),e(F);var W=t(F),q=a(W);let ts;var cs=a(q,!0);e(q),e(W);var ws=t(W),ms=a(ws,!0);e(ws);var $=t(ws),Ts=a($,!0);e($);var _s=t($),Hs=a(_s,!0);e(_s);var V=t(_s),us=a(V,!0);e(V);var Ns=t(V),Rs=a(Ns);{var Xs=g=>{var C=bt();E("click",C,()=>Ve(s(d))),o(g,C)},Ys=g=>{var C=ft();o(g,C)};k(Rs,g=>{s(d).status==="error"&&(s(d).errorDetail||s(d).debugInfo)?g(Xs):g(Ys,!1)})}e(Ns),e(O);var se=t(O,2);{var Es=g=>{var C=Pt(),rs=a(C),ls=a(rs),Fs=a(ls),c=t(a(Fs),2),w=a(c,!0);e(c),e(Fs);var f=t(Fs,2);{var z=H=>{var N=Dt(),A=t(a(N),2),D=a(A);{var ks=m=>{var y=gt(),P=t(a(y),2);let R;var le=a(P,!0);e(P),e(y),h(()=>{R=Z(P,1,"category-badge svelte-1dkwspw",null,R,{playwright:s(d).debugInfo.error_category==="playwright_scraper"}),v(le,s(d).debugInfo.error_category)}),o(m,y)};k(D,m=>{s(d).debugInfo.error_category&&m(ks)})}var $s=t(D,2);{var ae=m=>{var y=mt(),P=t(a(y),2),R=a(P,!0);e(P),e(y),h(()=>v(R,s(d).debugInfo.likely_cause)),o(m,y)};k($s,m=>{s(d).debugInfo.likely_cause&&m(ae)})}var ys=t($s,2);{var Bs=m=>{var y=yt(),P=t(a(y),2),R=a(P,!0);e(P),e(y),h(()=>v(R,s(d).debugInfo.ai_analysis_hint)),o(m,y)};k(ys,m=>{s(d).debugInfo.ai_analysis_hint&&m(Bs)})}var te=t(ys,2);{var Gs=m=>{var y=xt(),P=t(a(y),2),R=a(P,!0);e(P),e(y),h(()=>v(R,s(d).debugInfo.step)),o(m,y)};k(te,m=>{s(d).debugInfo.step&&m(Gs)})}e(A);var Ws=t(A,2);{var zs=m=>{var y=St(),P=t(a(y),2),R=a(P,!0);e(P),e(y),h(()=>v(R,s(d).debugInfo.playwright_stderr)),o(m,y)};k(Ws,m=>{s(d).debugInfo.playwright_stderr&&m(zs)})}var Us=t(Ws,2),qs=t(a(Us),2),re=a(qs,!0);e(qs),e(Us),e(N),h(m=>v(re,m),[()=>JSON.stringify(s(d).debugInfo,null,2)]),o(H,N)};k(f,H=>{s(d).debugInfo&&H(z)})}e(ls),e(rs),e(C),h(()=>v(w,s(d).errorDetail||"No error detail")),o(g,C)},ee=Ne(()=>s(Q).has(s(d).id)&&s(d).status==="error");k(se,g=>{s(ee)&&g(Es)})}h((g,C,rs,ls)=>{os=Z(O,1,"sync-row svelte-1dkwspw",null,os,g),v(es,C),ns=Z(as,1,"provider-badge svelte-1dkwspw",null,ns,{opal:s(d).provider==="opal",dhl:s(d).provider==="dhl"}),v(Os,rs),ts=Z(q,1,"sync-badge svelte-1dkwspw",null,ts,{success:s(d).status==="success",error:s(d).status==="error",running:s(d).status==="running"}),v(cs,s(d).status==="success"?"âœ… Success":s(d).status==="error"?"âŒ Error":"â³ Running"),v(ms,s(d).created||0),v(Ts,s(d).updated||0),v(Hs,s(d).skipped||0),v(us,ls)},[()=>({expanded:s(Q).has(s(d).id),"has-error":s(d).status==="error"}),()=>Vs(s(d).startedAt),()=>s(d).provider.toUpperCase(),()=>s(d).duration?(s(d).duration/1e3).toFixed(1)+"s":"-"]),E("click",Ns,Ee(function(g){Fe.call(this,xs,g)})),E("click",O,()=>s(d).status==="error"?qe(s(d).id):null),o(Is,l)}),e(ss),e(Y),e(L),o(S,L)};k(I,S=>{s(Js).length===0?S(X):S(Ls,!1)})}e(_),o(r,_)};k(sa,r=>{s(ps)&&s(vs).length===0&&s(is).length===0?r(ea):s(Ms)?r(aa,1):s(M)==="pickings"?r(ta,2):s(M)==="shipments"?r(ra,3):s(M)==="sync"&&r(la,4)})}e(Zs),h(()=>{js.disabled=s(ps),v(Qe,s(ps)?"â†» Loading...":"â†» Refresh"),he=Z(Cs,1,"tab svelte-1dkwspw",null,he,{active:s(M)==="pickings"}),v(Xe,`ğŸ“‹ Ready to Ship (${s(vs).length??""})`),be=Z(As,1,"tab svelte-1dkwspw",null,be,{active:s(M)==="shipments"}),v(Ye,`ğŸšš Shipments (${s(is).length??""})`),ge=Z(fe,1,"tab svelte-1dkwspw",null,ge,{active:s(M)==="sync"})}),E("click",js,bs),E("click",Cs,()=>x(M,"pickings")),E("click",As,()=>x(M,"shipments")),E("click",fe,()=>x(M,"sync")),o(hs,Zs),Aa()}export{jt as component,Mt as universal};
