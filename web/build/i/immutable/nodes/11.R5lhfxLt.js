import{a as F}from"../chunks/D_yn4hlI.js";import{f as n,a as i,c as ls}from"../chunks/DwaBocJP.js";import{i as Ea}from"../chunks/Cn36vQlI.js";import{o as Fa}from"../chunks/CbLRd9uU.js";import{z as $a,A as k,B as za,C as t,D as a,c as y,m as E,b as e,F as s,G as ue,O as Ws}from"../chunks/D8pH6ZKL.js";import{e as T,s as d}from"../chunks/DMOeGUlm.js";import{i as u}from"../chunks/BXZ4KMWb.js";import{s as Q,e as Cs,i as As}from"../chunks/CaL8-jqQ.js";import{s as qs}from"../chunks/BWrQZ7tB.js";import{s as Vs}from"../chunks/Bfc47y5P.js";import{b as Zs}from"../chunks/6Fc_rrnG.js";import{t as de}from"../chunks/DEEbTplX.js";async function Ua(){try{const[ke,Ie,ve,ie]=await Promise.all([F.get("/api/odoo/pickings?state=assigned"),F.get("/api/delivery/shipments"),F.get("/api/delivery/sync/history"),F.get("/api/delivery/config")]);return{pickings:ke||[],shipments:Ie||[],syncHistory:ve||[],providersConfig:ie||{opal:!1,dhl:!1}}}catch(ke){return console.error("Load error:",ke),{pickings:[],shipments:[],syncHistory:[],providersConfig:{opal:!1,dhl:!1},error:ke.message}}}const er=Object.freeze(Object.defineProperty({__proto__:null,load:Ua},Symbol.toStringTag,{value:"Module"}));var Ma=n('<button class="action-btn opal-btn svelte-1dkwspw"> </button>'),Ja=n('<button class="action-btn dhl-btn svelte-1dkwspw"> </button>'),ja=n('<div class="loading svelte-1dkwspw">Loading shipping data...</div>'),Ba=n('<div class="error svelte-1dkwspw"> </div>'),Ga=n('<div class="empty-state svelte-1dkwspw"><p class="svelte-1dkwspw">âœ… No pickings ready to ship</p> <small class="svelte-1dkwspw">Pickings with status "assigned" will appear here</small></div>'),Wa=n('<tr class="svelte-1dkwspw"><td class="picking-name svelte-1dkwspw"> </td><td class="svelte-1dkwspw"> </td><td class="svelte-1dkwspw"> </td><td class="svelte-1dkwspw"><div class="location-cell svelte-1dkwspw"><span class="from svelte-1dkwspw"> </span> <span class="arrow svelte-1dkwspw">â†’</span> <span class="to svelte-1dkwspw"> </span></div></td><td class="svelte-1dkwspw"><span class="state-badge svelte-1dkwspw"> </span></td><td class="svelte-1dkwspw"> </td><td class="svelte-1dkwspw"><button class="action-btn ship-btn svelte-1dkwspw"> </button></td></tr>'),qa=n('<div class="table-container svelte-1dkwspw"><table class="svelte-1dkwspw"><thead class="svelte-1dkwspw"><tr><th class="svelte-1dkwspw">Picking #</th><th class="svelte-1dkwspw">Origin</th><th class="svelte-1dkwspw">Partner</th><th class="svelte-1dkwspw">Location</th><th class="svelte-1dkwspw">State</th><th class="svelte-1dkwspw">Scheduled</th><th class="svelte-1dkwspw">Actions</th></tr></thead><tbody class="svelte-1dkwspw"></tbody></table></div>'),Va=n(`<div class="pickings-section"><p class="section-desc svelte-1dkwspw">These are Odoo Transfer Orders ready to be shipped. Click "Ship
                with OPAL" to create a delivery shipment.</p> <!></div>`),Za=n('<div class="empty-state svelte-1dkwspw"><p class="svelte-1dkwspw">ğŸ“­ No shipments yet</p> <small class="svelte-1dkwspw">Create your first shipment from the "Ready to Ship" tab</small></div>'),Ka=n('<span class="hwb-number svelte-1dkwspw"> </span>'),Qa=n('<span class="tracking-number svelte-1dkwspw"> </span> <!>',1),Xa=n('<span class="muted svelte-1dkwspw">Pending...</span>'),Ya=n('<div class="route svelte-1dkwspw"><span class="from svelte-1dkwspw"> </span> <span class="arrow svelte-1dkwspw">â†’</span> <span class="to svelte-1dkwspw"> </span></div>'),et=n('<span class="muted svelte-1dkwspw">-</span>'),st=n('<span class="product-badge svelte-1dkwspw"> </span>'),at=n('<span class="muted svelte-1dkwspw">-</span>'),tt=n('<span class="receiver svelte-1dkwspw"> </span>'),rt=n('<div class="delivery-info svelte-1dkwspw"><span> </span> <!></div>'),lt=n('<span class="muted svelte-1dkwspw">-</span>'),dt=n('<button class="action-btn cancel-btn svelte-1dkwspw">âŒ Cancel</button>'),vt=n('<span class="muted svelte-1dkwspw">-</span>'),it=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Contact:</label> <span class="svelte-1dkwspw"> </span></div>'),pt=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Phone:</label> <span class="svelte-1dkwspw"> </span></div>'),ot=n('<div class="detail-item note svelte-1dkwspw"><label class="svelte-1dkwspw">Note:</label> <span class="svelte-1dkwspw"> </span></div>'),nt=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Contact:</label> <span class="svelte-1dkwspw"> </span></div>'),ct=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Phone:</label> <span class="svelte-1dkwspw"> </span></div>'),wt=n('<div class="detail-item note svelte-1dkwspw"><label class="svelte-1dkwspw">Note:</label> <span class="svelte-1dkwspw"> </span></div>'),_t=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Contents:</label> <span class="highlight svelte-1dkwspw"> </span></div>'),ut=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Packages:</label> <span class="svelte-1dkwspw"> </span></div>'),kt=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Weight:</label> <span class="svelte-1dkwspw"> </span></div>'),ht=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Dimensions:</label> <span class="svelte-1dkwspw"> </span></div>'),bt=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Value:</label> <span class="value svelte-1dkwspw"> </span></div>'),ft=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Date/Time:</label> <span class="svelte-1dkwspw"> </span></div>'),gt=n(`<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Received
                                                                    by:</label> <span class="highlight svelte-1dkwspw"> </span></div>`),mt=n('<div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Created:</label> <span class="svelte-1dkwspw"> </span></div>'),yt=n(`<tr class="details-row svelte-1dkwspw"><td colspan="7" class="svelte-1dkwspw"><div class="shipment-details svelte-1dkwspw"><div class="details-grid svelte-1dkwspw"><div class="detail-section svelte-1dkwspw"><h4 class="svelte-1dkwspw">ğŸ“¦ Pickup (Abholung)</h4> <div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Company:</label> <span class="svelte-1dkwspw"> </span></div> <!> <div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Address:</label> <span class="svelte-1dkwspw"> </span></div> <!> <div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Date/Time:</label> <span class="svelte-1dkwspw"> </span></div> <!></div> <div class="detail-section svelte-1dkwspw"><h4 class="svelte-1dkwspw">ğŸšš Delivery
                                                            (Zustellung)</h4> <div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Company:</label> <span class="svelte-1dkwspw"> </span></div> <!> <div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Address:</label> <span class="svelte-1dkwspw"> </span></div> <!> <div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw">Date/Time:</label> <span class="svelte-1dkwspw"> </span></div> <!></div> <div class="detail-section svelte-1dkwspw"><h4 class="svelte-1dkwspw">ğŸ“‹ Package Info</h4> <!> <!> <!> <!> <!></div> <div class="detail-section svelte-1dkwspw"><h4 class="svelte-1dkwspw">ğŸ“Š Status</h4> <div class="detail-item svelte-1dkwspw"><label class="svelte-1dkwspw"> </label> <span class="status-value svelte-1dkwspw"> </span></div> <!> <!> <!></div></div></div></td></tr>`),xt=n('<tr><td class="expand-cell svelte-1dkwspw"><span class="expand-icon svelte-1dkwspw"> </span></td><td class="tracking-cell svelte-1dkwspw"><span> </span> <!></td><td class="route-cell svelte-1dkwspw"><!></td><td class="svelte-1dkwspw"><!></td><td class="svelte-1dkwspw"><span class="state-badge svelte-1dkwspw"> </span></td><td class="svelte-1dkwspw"><!></td><td class="svelte-1dkwspw"><!></td></tr> <!>',1),St=n('<div class="table-container svelte-1dkwspw"><table class="svelte-1dkwspw"><thead class="svelte-1dkwspw"><tr><th class="svelte-1dkwspw"></th><th class="svelte-1dkwspw">Tracking</th><th class="svelte-1dkwspw">From â†’ To</th><th class="svelte-1dkwspw">Product</th><th class="svelte-1dkwspw">Status</th><th class="svelte-1dkwspw">Delivered</th><th class="svelte-1dkwspw">Actions</th></tr></thead><tbody class="svelte-1dkwspw"></tbody></table></div>'),Dt=n('<div class="shipments-section"><p class="section-desc svelte-1dkwspw">Active and past shipments created through the delivery system.</p> <!></div>'),Pt=n('<div class="empty-state svelte-1dkwspw"><p class="svelte-1dkwspw">ğŸ“­ No sync history yet</p> <small class="svelte-1dkwspw">Synchronizations will appear automatically</small></div>'),Ct=n('<span class="expand-icon svelte-1dkwspw"> </span>'),At=n('<span class="muted svelte-1dkwspw">-</span>'),Lt=n('<button class="action-btn copy-btn svelte-1dkwspw" title="Copy debug info for AI">ğŸ¤– Copy for AI</button>'),It=n('<span class="muted svelte-1dkwspw">-</span>'),Ot=n('<div class="debug-item svelte-1dkwspw"><label class="svelte-1dkwspw">Category:</label> <span> </span></div>'),Tt=n(`<div class="debug-item svelte-1dkwspw"><label class="svelte-1dkwspw">Likely
                                                                        Cause:</label> <span class="highlight svelte-1dkwspw"> </span></div>`),Ht=n(`<div class="debug-item svelte-1dkwspw"><label class="svelte-1dkwspw">ğŸ’¡ AI
                                                                        Hint:</label> <span class="ai-hint svelte-1dkwspw"> </span></div>`),Nt=n('<div class="debug-item svelte-1dkwspw"><label class="svelte-1dkwspw">Step:</label> <span class="svelte-1dkwspw"> </span></div>'),Rt=n(`<div class="stderr-section svelte-1dkwspw"><h5 class="svelte-1dkwspw">ğŸ“‹
                                                                    Playwright
                                                                    Output
                                                                    (stderr):</h5> <pre class="stderr-output svelte-1dkwspw"> </pre></div>`),Et=n(`<div class="debug-section svelte-1dkwspw"><h4 class="svelte-1dkwspw">ğŸ” Debug Information</h4> <div class="debug-grid svelte-1dkwspw"><!> <!> <!> <!></div> <!> <details class="raw-json svelte-1dkwspw"><summary class="svelte-1dkwspw">ğŸ”§ Raw Debug
                                                                JSON</summary> <pre class="svelte-1dkwspw"> </pre></details></div>`),Ft=n('<tr class="debug-row svelte-1dkwspw"><td colspan="9" class="svelte-1dkwspw"><div class="debug-details svelte-1dkwspw"><div class="debug-section svelte-1dkwspw"><h4 class="svelte-1dkwspw">âš ï¸ Error</h4> <pre class="error-message svelte-1dkwspw"> </pre></div> <!></div></td></tr>'),$t=n('<tr><td class="expand-cell svelte-1dkwspw"><!></td><td class="sync-time svelte-1dkwspw"> </td><td class="svelte-1dkwspw"><span> </span></td><td class="svelte-1dkwspw"><span> </span></td><td class="stat-cell svelte-1dkwspw"> </td><td class="stat-cell svelte-1dkwspw"> </td><td class="stat-cell muted svelte-1dkwspw"> </td><td class="duration-cell svelte-1dkwspw"> </td><td class="svelte-1dkwspw"><!></td></tr> <!>',1),zt=n('<div class="table-container svelte-1dkwspw"><table class="svelte-1dkwspw"><thead class="svelte-1dkwspw"><tr><th class="svelte-1dkwspw"></th><th class="svelte-1dkwspw">Time</th><th class="svelte-1dkwspw">Provider</th><th class="svelte-1dkwspw">Status</th><th class="svelte-1dkwspw">Created</th><th class="svelte-1dkwspw">Updated</th><th class="svelte-1dkwspw">Skipped</th><th class="svelte-1dkwspw">Duration</th><th class="svelte-1dkwspw">Actions</th></tr></thead><tbody class="svelte-1dkwspw"></tbody></table></div>'),Ut=n(`<div class="sync-section svelte-1dkwspw"><p class="section-desc svelte-1dkwspw">Synchronization history with external services (OPAL, DHL,
                Odoo). OPAL syncs every hour (on the hour), DHL syncs at :30
                past the hour. Active 8 AM - 6 PM.</p> <!></div>`),Mt=n('<div class="shipping-page svelte-1dkwspw"><header class="svelte-1dkwspw"><h1 class="svelte-1dkwspw">ğŸ“¦ Shipping & Delivery</h1> <div class="header-actions svelte-1dkwspw"><!> <!> <button class="refresh-btn svelte-1dkwspw"> </button></div></header> <div class="tabs svelte-1dkwspw"><button> </button> <button> </button> <button>ğŸ”„ Sync History</button></div> <!></div>');function sr(ke,Ie){$a(Ie,!1);let ve=E([]),ie=E([]),qe=E([]),pe=E(!0),Ve=E(null),M=E("pickings"),G=E(new Set),Oe=E(!1),Te=E(!1),X=E(new Set),Y=E(new Set),He=E({opal:!1,dhl:!1});Fa(async()=>{await he()});async function he(){y(pe,!0),y(Ve,null);try{const[l,b,J,Ke]=await Promise.all([F.get("/api/odoo/pickings?state=assigned"),F.get("/api/delivery/shipments"),F.get("/api/delivery/sync/history"),F.get("/api/delivery/config")]);y(ve,l||[]),y(ie,b||[]),y(qe,J||[]),y(qe,J||[]),Ke&&y(He,Ke)}catch(l){console.error(l),y(Ve,l.message)}finally{y(pe,!1)}}async function Ks(l){if(!e(G).has(l)){e(G).add(l),y(G,e(G));try{await F.post("/api/delivery/shipments",{pickingId:l,providerCode:"opal"}),await he(),y(M,"shipments")}catch(b){alert("Failed to create shipment: "+b.message)}finally{e(G).delete(l),y(G,e(G))}}}async function Qs(l){if(confirm("Are you sure you want to cancel this shipment?"))try{await F.post(`/api/delivery/shipments/${l}/cancel`),await he()}catch(b){alert("Failed to cancel shipment: "+b.message)}}async function Xs(){y(Oe,!0),de.add("Syncing with OPAL...","info");try{await F.post("/api/delivery/import/opal",{}),de.add("OPAL sync started. Refreshing data...","success"),setTimeout(async()=>{await he(),y(Oe,!1)},4e3)}catch(l){de.add("OPAL sync failed: "+l.message,"error"),y(Oe,!1)}}async function Ys(){y(Te,!0),de.add("Syncing with DHL...","info");try{await F.post("/api/delivery/import/dhl",{}),de.add("DHL sync started. Refreshing data...","success"),setTimeout(async()=>{await he(),y(Te,!1)},4e3)}catch(l){de.add("DHL sync failed: "+l.message,"error"),y(Te,!1)}}function ea(l){var b;return l?l.provider==="dhl"?"dhl":l.ocu_number||l.hwb_number?"opal":(b=l.product)!=null&&b.includes("DHL")?"dhl":"opal":"unknown"}function ds(l){return l?new Date(l).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function sa(l){return{draft:"#6c757d",assigned:"#ffc107",confirmed:"#17a2b8",done:"#28a745",cancel:"#dc3545"}[l]||"#6c757d"}function aa(l){return{pending:"#ffc107",processing:"#17a2b8",shipped:"#28a745",delivered:"#28a745",failed:"#dc3545",cancelled:"#6c757d"}[l]||"#6c757d"}function ta(l){e(X).has(l)?e(X).delete(l):e(X).add(l),y(X,e(X))}function ra(l){if(!l)return null;try{return JSON.parse(l)}catch{return null}}function la(l){e(Y).has(l)?e(Y).delete(l):e(Y).add(l),y(Y,e(Y))}async function da(l){const b=`
# Sync Error Debug Info
Provider: ${l.provider}
Time: ${ds(l.startedAt)}
Status: ${l.status}
Duration: ${l.duration?(l.duration/1e3).toFixed(1)+"s":"N/A"}

## Error Message
${l.errorDetail||"No error detail"}

## Debug Information
${l.debugInfo?JSON.stringify(l.debugInfo,null,2):"No debug info available"}

## Statistics
- Created: ${l.created||0}
- Updated: ${l.updated||0}
- Skipped: ${l.skipped||0}
- Errors: ${l.errors||0}

---
Copy this to ChatGPT/Claude for analysis
`.trim();try{await navigator.clipboard.writeText(b),de.add("Debug info copied to clipboard!","success")}catch(J){de.add("Failed to copy: "+J.message,"error")}}Ea();var vs=Mt(),is=a(vs),Ls=t(a(is),2),Is=a(Ls);{var va=l=>{var b=Ma(),J=a(b,!0);s(b),k(()=>{b.disabled=e(Oe)||e(pe),d(J,e(Oe)?"â³ Syncing...":"ğŸŸ¢ Sync OPAL")}),T("click",b,Xs),i(l,b)};u(Is,l=>{e(He)&&e(He).opal===!0&&l(va)})}var Os=t(Is,2);{var ia=l=>{var b=Ja(),J=a(b,!0);s(b),k(()=>{b.disabled=e(Te)||e(pe),d(J,e(Te)?"â³ Syncing...":"ğŸŸ¡ Sync DHL")}),T("click",b,Ys),i(l,b)};u(Os,l=>{e(He)&&e(He).dhl===!0&&l(ia)})}var Ze=t(Os,2),pa=a(Ze,!0);s(Ze),s(Ls),s(is);var ps=t(is,2),Ne=a(ps);let Ts;var oa=a(Ne);s(Ne);var Re=t(Ne,2);let Hs;var na=a(Re);s(Re);var Ns=t(Re,2);let Rs;s(ps);var ca=t(ps,2);{var wa=l=>{var b=ja();i(l,b)},_a=l=>{var b=ls(),J=ue(b);{var Ke=be=>{var fe=Ba(),os=a(fe);s(fe),k(()=>d(os,`Failed to load data: ${e(Ve)??""}`)),i(be,fe)},ua=be=>{var fe=ls(),os=ue(fe);{var ka=ge=>{var me=Va(),ns=t(a(me),2);{var cs=O=>{var H=Ga();i(O,H)},ws=O=>{var H=qa(),ye=a(H),xe=t(a(ye));Cs(xe,5,()=>e(ve),As,(oe,x)=>{var $=Wa(),ee=a($),Se=a(ee,!0);s(ee);var N=t(ee),D=a(N,!0);s(N);var r=t(N),W=a(r,!0);s(r);var se=t(r),c=a(se),q=a(c),z=a(q,!0);s(q);var ae=t(q,4),ne=a(ae,!0);s(ae),s(c),s(se);var V=t(se),j=a(V),De=a(j,!0);s(j),s(V);var Z=t(V),Ee=a(Z,!0);s(Z);var te=t(Z),B=a(te),re=a(B,!0);s(B),s(te),s($),k((Fe,ce,we,le)=>{d(Se,e(x).name),d(D,e(x).origin||"-"),d(W,e(x).partner_id||"-"),d(z,e(x).location_id||"-"),d(ne,e(x).location_dest_id||"-"),qs(j,`background-color: ${Fe??""}`),d(De,e(x).state),d(Ee,ce),B.disabled=we,d(re,le)},[()=>sa(e(x).state),()=>ds(e(x).scheduled_date),()=>e(G).has(e(x).id),()=>e(G).has(e(x).id)?"â³ Processing...":"ğŸšš Ship with OPAL"]),T("click",B,()=>Ks(e(x).id)),i(oe,$)}),s(xe),s(ye),s(H),i(O,H)};u(ns,O=>{e(ve).length===0?O(cs):O(ws,!1)})}s(me),i(ge,me)},ha=ge=>{var me=ls(),ns=ue(me);{var cs=O=>{var H=Dt(),ye=t(a(H),2);{var xe=x=>{var $=Za();i(x,$)},oe=x=>{var $=St(),ee=a($),Se=t(a(ee));Cs(Se,5,()=>e(ie),As,(N,D)=>{const r=Ws(()=>ra(e(D).rawResponse)),W=Ws(()=>ea(e(r)));var se=xt(),c=ue(se);let q;var z=a(c),ae=a(z),ne=a(ae,!0);s(ae),s(z);var V=t(z),j=a(V);let De;var Z=a(j,!0);s(j);var Ee=t(j,2);{var te=v=>{var w=Qa(),h=ue(w),L=a(h,!0);s(h);var R=t(h,2);{var U=A=>{var P=Ka(),K=a(P);s(P),k(()=>d(K,`HWB: ${e(r).hwb_number??""}`)),i(A,P)};u(R,A=>{var P;(P=e(r))!=null&&P.hwb_number&&A(U)})}k(()=>{var A,P;return d(L,e(D).trackingNumber||((A=e(r))==null?void 0:A.ocu_number)||((P=e(r))==null?void 0:P.tracking_number))}),i(v,w)},B=v=>{var w=Xa();i(v,w)};u(Ee,v=>{var w,h;e(D).trackingNumber||(w=e(r))!=null&&w.ocu_number||(h=e(r))!=null&&h.tracking_number?v(te):v(B,!1)})}s(V);var re=t(V),Fe=a(re);{var ce=v=>{var w=Ya(),h=a(w),L=a(h,!0);s(h);var R=t(h,4),U=a(R,!0);s(R),s(w),k(()=>{d(L,e(r).pickup_name||e(r).pickup_city||"InBody"),d(U,e(r).delivery_name||e(r).recipient_name||e(r).delivery_city||e(r).recipient_city||"-")}),i(v,w)},we=v=>{var w=et();i(v,w)};u(Fe,v=>{e(r)?v(ce):v(we,!1)})}s(re);var le=t(re),_s=a(le);{var $e=v=>{var w=st(),h=a(w,!0);s(w),k(()=>d(h,e(r).product_type||e(r).product)),i(v,w)},us=v=>{var w=at();i(v,w)};u(_s,v=>{var w,h;(w=e(r))!=null&&w.product_type||(h=e(r))!=null&&h.product?v($e):v(us,!1)})}s(le);var _e=t(le),ze=a(_e),Ue=a(ze,!0);s(ze),s(_e);var Me=t(_e),Je=a(Me);{var ks=v=>{var w=rt(),h=a(w),L=a(h);s(h);var R=t(h,2);{var U=A=>{var P=tt(),K=a(P);s(P),k(()=>d(K,`ğŸ“ ${e(r).receiver??""}`)),i(A,P)};u(R,A=>{e(r).receiver&&A(U)})}s(w),k(()=>d(L,`${e(r).status_date??""}
                                                    ${(e(r).status_time||"")??""}`)),i(v,w)},je=v=>{var w=lt();i(v,w)};u(Je,v=>{var w;(w=e(r))!=null&&w.status_date?v(ks):v(je,!1)})}s(Me);var Be=t(Me),hs=a(Be);{var bs=v=>{var w=dt();T("click",w,()=>Qs(e(D).picking_id)),i(v,w)},fs=v=>{var w=vt();i(v,w)};u(hs,v=>{e(D).status==="pending"||e(D).status==="processing"?v(bs):v(fs,!1)})}s(Be),s(c);var gs=t(c,2);{var g=v=>{var w=yt(),h=a(w),L=a(h),R=a(L),U=a(R),A=t(a(U),2),P=t(a(A),2),K=a(P,!0);s(P),s(A);var Pe=t(A,2);{var Ge=p=>{var o=it(),_=t(a(o),2),f=a(_,!0);s(_),s(o),k(()=>d(f,e(r).pickup_contact)),i(p,o)};u(Pe,p=>{e(r).pickup_contact&&p(Ge)})}var Ce=t(Pe,2),Qe=t(a(Ce),2),Xe=a(Qe);s(Qe),s(Ce);var Ye=t(Ce,2);{var es=p=>{var o=pt(),_=t(a(o),2),f=a(_,!0);s(_),s(o),k(()=>d(f,e(r).pickup_phone)),i(p,o)};u(Ye,p=>{e(r).pickup_phone&&e(r).pickup_phone!=="+49 ()"&&p(es)})}var We=t(Ye,2),ss=t(a(We),2),ms=a(ss);s(ss),s(We);var as=t(We,2);{var ys=p=>{var o=ot(),_=t(a(o),2),f=a(_,!0);s(_),s(o),k(()=>d(f,e(r).pickup_note)),i(p,o)};u(as,p=>{e(r).pickup_note&&p(ys)})}s(U);var Ae=t(U,2),Le=t(a(Ae),2),ts=t(a(Le),2),m=a(ts,!0);s(ts),s(Le);var S=t(Le,2);{var C=p=>{var o=nt(),_=t(a(o),2),f=a(_,!0);s(_),s(o),k(()=>d(f,e(r).delivery_contact)),i(p,o)};u(S,p=>{e(r).delivery_contact&&p(C)})}var I=t(S,2),rs=t(a(I),2),ba=a(rs);s(rs),s(I);var Es=t(I,2);{var fa=p=>{var o=ct(),_=t(a(o),2),f=a(_,!0);s(_),s(o),k(()=>d(f,e(r).delivery_phone)),i(p,o)};u(Es,p=>{e(r).delivery_phone&&e(r).delivery_phone!=="+49 ()"&&p(fa)})}var xs=t(Es,2),Fs=t(a(xs),2),ga=a(Fs);s(Fs),s(xs);var ma=t(xs,2);{var ya=p=>{var o=wt(),_=t(a(o),2),f=a(_,!0);s(_),s(o),k(()=>d(f,e(r).delivery_note)),i(p,o)};u(ma,p=>{e(r).delivery_note&&p(ya)})}s(Ae);var Ss=t(Ae,2),$s=t(a(Ss),2);{var xa=p=>{var o=_t(),_=t(a(o),2),f=a(_,!0);s(_),s(o),k(()=>d(f,e(r).description)),i(p,o)};u($s,p=>{e(r).description&&p(xa)})}var zs=t($s,2);{var Sa=p=>{var o=ut(),_=t(a(o),2),f=a(_);s(_),s(o),k(()=>d(f,`${e(r).package_count??""}
                                                                    pcs`)),i(p,o)};u(zs,p=>{e(r).package_count&&p(Sa)})}var Us=t(zs,2);{var Da=p=>{var o=kt(),_=t(a(o),2),f=a(_);s(_),s(o),k(()=>d(f,`${e(r).weight??""}
                                                                    kg`)),i(p,o)};u(Us,p=>{e(r).weight&&p(Da)})}var Ms=t(Us,2);{var Pa=p=>{var o=ht(),_=t(a(o),2),f=a(_);s(_),s(o),k(()=>d(f,`${e(r).dimensions??""}
                                                                    cm`)),i(p,o)};u(Ms,p=>{e(r).dimensions&&p(Pa)})}var Ca=t(Ms,2);{var Aa=p=>{var o=bt(),_=t(a(o),2),f=a(_);s(_),s(o),k(Ra=>d(f,`${Ra??""} EUR`),[()=>e(r).value.toLocaleString("de-DE")]),i(p,o)};u(Ca,p=>{e(r).value&&p(Aa)})}s(Ss);var Js=t(Ss,2),Ds=t(a(Js),2),Ps=a(Ds),La=a(Ps);s(Ps);var js=t(Ps,2),Ia=a(js,!0);s(js),s(Ds);var Bs=t(Ds,2);{var Oa=p=>{var o=ft(),_=t(a(o),2),f=a(_);s(_),s(o),k(()=>d(f,`${e(r).status_date??""}
                                                                    ${(e(r).status_time||"")??""}`)),i(p,o)};u(Bs,p=>{e(r).status_date&&p(Oa)})}var Gs=t(Bs,2);{var Ta=p=>{var o=gt(),_=t(a(o),2),f=a(_,!0);s(_),s(o),k(()=>d(f,e(r).receiver)),i(p,o)};u(Gs,p=>{e(r).receiver&&p(Ta)})}var Ha=t(Gs,2);{var Na=p=>{var o=mt(),_=t(a(o),2),f=a(_);s(_),s(o),k(()=>d(f,`${e(r).created_at??""}
                                                                    by ${(e(r).created_by||"-")??""}`)),i(p,o)};u(Ha,p=>{e(r).created_at&&p(Na)})}s(Js),s(R),s(L),s(h),s(w),k(p=>{d(K,e(r).pickup_name||"-"),d(Xe,`${(e(r).pickup_street||"-")??""}, ${e(r).pickup_zip??""}
                                                                ${e(r).pickup_city??""}`),d(ms,`${(e(r).pickup_date||"-")??""}
                                                                ${(e(r).pickup_time||"")??""}`),d(m,e(r).delivery_name||"-"),d(ba,`${(e(r).delivery_street||"-")??""}, ${e(r).delivery_zip??""}
                                                                ${e(r).delivery_city??""}`),d(ga,`${(e(r).delivery_date||"-")??""}
                                                                ${(e(r).delivery_time||"")??""}`),d(La,`${p??""}
                                                                Status:`),d(Ia,e(r).status||"-")},[()=>e(W).toUpperCase()]),i(v,w)};u(gs,v=>{e(X).has(e(D).id)&&e(r)&&v(g)})}k((v,w,h,L)=>{q=Q(c,1,"shipment-row svelte-1dkwspw",null,q,v),d(ne,w),De=Q(j,1,"provider-badge svelte-1dkwspw",null,De,{opal:e(W)==="opal",dhl:e(W)==="dhl"}),d(Z,h),qs(ze,`background-color: ${L??""}`),d(Ue,e(D).status)},[()=>({expanded:e(X).has(e(D).id)}),()=>e(X).has(e(D).id)?"â–¼":"â–¶",()=>e(W).toUpperCase(),()=>aa(e(D).status)]),T("click",Be,Vs(function(v){Zs.call(this,Ie,v)})),T("click",c,()=>ta(e(D).id)),i(N,se)}),s(Se),s(ee),s($),i(x,$)};u(ye,x=>{e(ie).length===0?x(xe):x(oe,!1)})}s(H),i(O,H)},ws=O=>{var H=ls(),ye=ue(H);{var xe=oe=>{var x=Ut(),$=t(a(x),2);{var ee=N=>{var D=Pt();i(N,D)},Se=N=>{var D=zt(),r=a(D),W=t(a(r));Cs(W,5,()=>e(qe),As,(se,c)=>{var q=$t(),z=ue(q);let ae;var ne=a(z),V=a(ne);{var j=g=>{var v=Ct(),w=a(v,!0);s(v),k(h=>d(w,h),[()=>e(Y).has(e(c).id)?"â–¼":"â–¶"]),i(g,v)},De=g=>{var v=At();i(g,v)};u(V,g=>{e(c).status==="error"?g(j):g(De,!1)})}s(ne);var Z=t(ne),Ee=a(Z,!0);s(Z);var te=t(Z),B=a(te);let re;var Fe=a(B,!0);s(B),s(te);var ce=t(te),we=a(ce);let le;var _s=a(we,!0);s(we),s(ce);var $e=t(ce),us=a($e,!0);s($e);var _e=t($e),ze=a(_e,!0);s(_e);var Ue=t(_e),Me=a(Ue,!0);s(Ue);var Je=t(Ue),ks=a(Je,!0);s(Je);var je=t(Je),Be=a(je);{var hs=g=>{var v=Lt();T("click",v,()=>da(e(c))),i(g,v)},bs=g=>{var v=It();i(g,v)};u(Be,g=>{e(c).status==="error"&&(e(c).errorDetail||e(c).debugInfo)?g(hs):g(bs,!1)})}s(je),s(z);var fs=t(z,2);{var gs=g=>{var v=Ft(),w=a(v),h=a(w),L=a(h),R=t(a(L),2),U=a(R,!0);s(R),s(L);var A=t(L,2);{var P=K=>{var Pe=Et(),Ge=t(a(Pe),2),Ce=a(Ge);{var Qe=m=>{var S=Ot(),C=t(a(S),2);let I;var rs=a(C,!0);s(C),s(S),k(()=>{I=Q(C,1,"category-badge svelte-1dkwspw",null,I,{playwright:e(c).debugInfo.error_category==="playwright_scraper"}),d(rs,e(c).debugInfo.error_category)}),i(m,S)};u(Ce,m=>{e(c).debugInfo.error_category&&m(Qe)})}var Xe=t(Ce,2);{var Ye=m=>{var S=Tt(),C=t(a(S),2),I=a(C,!0);s(C),s(S),k(()=>d(I,e(c).debugInfo.likely_cause)),i(m,S)};u(Xe,m=>{e(c).debugInfo.likely_cause&&m(Ye)})}var es=t(Xe,2);{var We=m=>{var S=Ht(),C=t(a(S),2),I=a(C,!0);s(C),s(S),k(()=>d(I,e(c).debugInfo.ai_analysis_hint)),i(m,S)};u(es,m=>{e(c).debugInfo.ai_analysis_hint&&m(We)})}var ss=t(es,2);{var ms=m=>{var S=Nt(),C=t(a(S),2),I=a(C,!0);s(C),s(S),k(()=>d(I,e(c).debugInfo.step)),i(m,S)};u(ss,m=>{e(c).debugInfo.step&&m(ms)})}s(Ge);var as=t(Ge,2);{var ys=m=>{var S=Rt(),C=t(a(S),2),I=a(C,!0);s(C),s(S),k(()=>d(I,e(c).debugInfo.playwright_stderr)),i(m,S)};u(as,m=>{e(c).debugInfo.playwright_stderr&&m(ys)})}var Ae=t(as,2),Le=t(a(Ae),2),ts=a(Le,!0);s(Le),s(Ae),s(Pe),k(m=>d(ts,m),[()=>JSON.stringify(e(c).debugInfo,null,2)]),i(K,Pe)};u(A,K=>{e(c).debugInfo&&K(P)})}s(h),s(w),s(v),k(()=>d(U,e(c).errorDetail||"No error detail")),i(g,v)};u(fs,g=>{e(Y).has(e(c).id)&&e(c).status==="error"&&g(gs)})}k((g,v,w,h)=>{ae=Q(z,1,"sync-row svelte-1dkwspw",null,ae,g),d(Ee,v),re=Q(B,1,"provider-badge svelte-1dkwspw",null,re,{opal:e(c).provider==="opal",dhl:e(c).provider==="dhl"}),d(Fe,w),le=Q(we,1,"sync-badge svelte-1dkwspw",null,le,{success:e(c).status==="success",error:e(c).status==="error",running:e(c).status==="running"}),d(_s,e(c).status==="success"?"âœ… Success":e(c).status==="error"?"âŒ Error":"â³ Running"),d(us,e(c).created||0),d(ze,e(c).updated||0),d(Me,e(c).skipped||0),d(ks,h)},[()=>({expanded:e(Y).has(e(c).id),"has-error":e(c).status==="error"}),()=>ds(e(c).startedAt),()=>e(c).provider.toUpperCase(),()=>e(c).duration?(e(c).duration/1e3).toFixed(1)+"s":"-"]),T("click",je,Vs(function(g){Zs.call(this,Ie,g)})),T("click",z,()=>e(c).status==="error"?la(e(c).id):null),i(se,q)}),s(W),s(r),s(D),i(N,D)};u($,N=>{e(qe).length===0?N(ee):N(Se,!1)})}s(x),i(oe,x)};u(ye,oe=>{e(M)==="sync"&&oe(xe)},!0)}i(O,H)};u(ns,O=>{e(M)==="shipments"?O(cs):O(ws,!1)},!0)}i(ge,me)};u(os,ge=>{e(M)==="pickings"?ge(ka):ge(ha,!1)},!0)}i(be,fe)};u(J,be=>{e(Ve)?be(Ke):be(ua,!1)},!0)}i(l,b)};u(ca,l=>{e(pe)&&e(ve).length===0&&e(ie).length===0?l(wa):l(_a,!1)})}s(vs),k(()=>{Ze.disabled=e(pe),d(pa,e(pe)?"â†» Loading...":"â†» Refresh"),Ts=Q(Ne,1,"tab svelte-1dkwspw",null,Ts,{active:e(M)==="pickings"}),d(oa,`ğŸ“‹ Ready to Ship (${e(ve).length??""})`),Hs=Q(Re,1,"tab svelte-1dkwspw",null,Hs,{active:e(M)==="shipments"}),d(na,`ğŸšš Shipments (${e(ie).length??""})`),Rs=Q(Ns,1,"tab svelte-1dkwspw",null,Rs,{active:e(M)==="sync"})}),T("click",Ze,he),T("click",Ne,()=>y(M,"pickings")),T("click",Re,()=>y(M,"shipments")),T("click",Ns,()=>y(M,"sync")),i(ke,vs),za()}export{sr as component,er as universal};
