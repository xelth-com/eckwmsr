import{f as m,a as d}from"../chunks/DwaBocJP.js";import{i as ka}from"../chunks/Cn36vQlI.js";import{o as xa}from"../chunks/CbLRd9uU.js";import{z as Ca,A as _,B as Ma,D as r,H as v,b as t,m as la,c as oa,C as e,F as s,M as Da,K as ia}from"../chunks/D8pH6ZKL.js";import{e as g,s as va}from"../chunks/DMOeGUlm.js";import{i as H}from"../chunks/BXZ4KMWb.js";import{r as f}from"../chunks/CeRkQ_jF.js";import{b as u}from"../chunks/DmFdKuaY.js";import{b as na}from"../chunks/CMTjv1Cc.js";import{p as $a}from"../chunks/Bfc47y5P.js";import{a as Ea,s as Pa}from"../chunks/wVSw00Z_.js";import{p as Ua}from"../chunks/_DTFJL5n.js";import{a as b}from"../chunks/D_yn4hlI.js";import{g as h}from"../chunks/D11uLj64.js";import{t as c}from"../chunks/DEEbTplX.js";var qa=m('<button class="delete-btn svelte-3lraag">Delete</button>'),Ba=m('<div class="loading">Loading...</div>'),Ia=m('<div class="section svelte-3lraag"><h2 class="svelte-3lraag">Status</h2> <div class="field svelte-3lraag"><label class="svelte-3lraag">Current Status</label> <select class="svelte-3lraag"><option>Pending</option><option>Received</option><option>Processing</option><option>Completed</option><option>Cancelled</option></select></div> <div class="field svelte-3lraag"><label class="svelte-3lraag">Priority</label> <select class="svelte-3lraag"><option>Low</option><option>Normal</option><option>High</option><option>Urgent</option></select></div></div>'),Ka=m('<form class="form-grid svelte-3lraag"><div class="section svelte-3lraag"><h2 class="svelte-3lraag">Customer Information</h2> <div class="field svelte-3lraag"><label class="svelte-3lraag">Customer Name *</label> <input type="text" required class="svelte-3lraag"/></div> <div class="field svelte-3lraag"><label class="svelte-3lraag">Email</label> <input type="email" class="svelte-3lraag"/></div></div> <div class="section svelte-3lraag"><h2 class="svelte-3lraag">Product Details</h2> <div class="field svelte-3lraag"><label class="svelte-3lraag">Product SKU *</label> <input type="text" required class="code-input svelte-3lraag"/></div> <div class="field svelte-3lraag"><label class="svelte-3lraag">Product Name</label> <input type="text" class="svelte-3lraag"/></div></div> <div class="section full svelte-3lraag"><h2 class="svelte-3lraag">Issue Description</h2> <textarea rows="4" class="svelte-3lraag"></textarea></div> <!> <div class="actions full svelte-3lraag"><button type="button" class="cancel-btn svelte-3lraag">Cancel</button> <button type="submit" class="save-btn svelte-3lraag"> </button></div></form>'),Ga=m('<div class="detail-page svelte-3lraag"><div class="header svelte-3lraag"><button class="back-btn svelte-3lraag">‚Üê Back</button> <div class="title-row svelte-3lraag"><h1 class="svelte-3lraag"> </h1> <!></div></div> <!></div>');function ee(ca,da){Ca(da,!1);const ua=()=>Ea(Ua,"$page",ma),[ma,pa]=Pa();let p=ua().params.id,n=p==="new",L=la(!n),a=la({rmaNumber:"",customerName:"",customerEmail:"",productSku:"",productName:"",issueDescription:"",status:"pending",priority:"normal"});xa(async()=>{n?v(a,t(a).rmaNumber="AUTO-GEN"):await _a()});async function _a(){try{const l=await b.get(`/rma/${p}`);oa(a,{...l})}catch{c.add("Error loading RMA","error"),h("/dashboard/rma")}finally{oa(L,!1)}}async function ga(){try{if(n){if(!t(a).customerName||!t(a).productSku){c.add("Customer Name and Product SKU are required","warning");return}t(a).rmaNumber==="AUTO-GEN"&&delete t(a).rmaNumber,await b.post("/rma",t(a)),c.add("RMA Created Successfully","success")}else await b.put(`/rma/${p}`,t(a)),c.add("RMA Updated","success");h("/dashboard/rma")}catch(l){c.add(`Error: ${l.message}`,"error")}}async function fa(){if(confirm("Are you sure you want to delete this RMA?"))try{await b.delete(`/rma/${p}`),c.add("RMA Deleted","success"),h("/dashboard/rma")}catch(l){c.add(l.message,"error")}}function O(){h("/dashboard/rma")}ka();var y=Ga(),N=r(y),T=r(N),z=e(T,2),w=r(z),ba=r(w,!0);s(w);var ha=e(w,2);{var ya=l=>{var i=qa();g("click",i,fa),d(l,i)};H(ha,l=>{n||l(ya)})}s(z),s(N);var Na=e(N,2);{var wa=l=>{var i=Ba();d(l,i)},Aa=l=>{var i=Ka(),A=r(i),R=e(r(A),2),F=e(r(R),2);f(F),s(R);var j=e(R,2),J=e(r(j),2);f(J),s(j),s(A);var S=e(A,2),k=e(r(S),2),Q=e(r(k),2);f(Q),s(k);var V=e(k,2),W=e(r(V),2);f(W),s(V),s(S);var x=e(S,2),X=e(r(x),2);Da(X),s(x);var Y=e(x,2);{var Ra=o=>{var C=Ia(),M=e(r(C),2),D=e(r(M),2);_(()=>{t(a),ia(()=>{})});var $=r(D);$.value=$.__value="pending";var E=e($);E.value=E.__value="received";var P=e(E);P.value=P.__value="processing";var U=e(P);U.value=U.__value="completed";var ta=e(U);ta.value=ta.__value="cancelled",s(D),s(M);var ra=e(M,2),q=e(r(ra),2);_(()=>{t(a),ia(()=>{})});var B=r(q);B.value=B.__value="low";var I=e(B);I.value=I.__value="normal";var K=e(I);K.value=K.__value="high";var sa=e(K);sa.value=sa.__value="urgent",s(q),s(ra),s(C),na(D,()=>t(a).status,G=>v(a,t(a).status=G)),na(q,()=>t(a).priority,G=>v(a,t(a).priority=G)),d(o,C)};H(Y,o=>{n||o(Ra)})}var Z=e(Y,2),aa=r(Z),ea=e(aa,2),Sa=r(ea,!0);s(ea),s(Z),s(i),_(()=>va(Sa,n?"Create Request":"Save Changes")),u(F,()=>t(a).customerName,o=>v(a,t(a).customerName=o)),u(J,()=>t(a).customerEmail,o=>v(a,t(a).customerEmail=o)),u(Q,()=>t(a).productSku,o=>v(a,t(a).productSku=o)),u(W,()=>t(a).productName,o=>v(a,t(a).productName=o)),u(X,()=>t(a).issueDescription,o=>v(a,t(a).issueDescription=o)),g("click",aa,O),g("submit",i,$a(ga)),d(l,i)};H(Na,l=>{t(L)?l(wa):l(Aa,!1)})}s(y),_(()=>va(ba,n?"New RMA Request":`RMA ${t(a).rmaNumber}`)),g("click",T,O),d(ca,y),Ma(),pa()}export{ee as component};
